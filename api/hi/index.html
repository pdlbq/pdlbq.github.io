<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>14</title>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
	</style>
</head>
<body>
	<script type="text/javascript">
		window.requestAnimFrame = (function(){
      	return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function(/* function */ callback, /* DOMElement */ element){
                window.setTimeout(callback, 1000 / 60);
              };
    		})();
    		///////////////////////////////////////////////////////////
		var canvas = document.createElement("canvas");
		var ctx = canvas.getContext("2d");
		canvas.width = 1000;
		canvas.height = 1200;
		document.body.appendChild(canvas);
    var mx = [], my = [];
		//ctx.fillRect(10, 10, 50, 50);
	var tx = [];
		var ty = [];
		ctx.fillStyle = 'blueviolet';
        ctx.strokeStyle = 'blueviolet';
		//var x=0, y=0;
       var pen = {
        	x: 400,
      		y: 400,
      		speed: 1
        };
        var x, y;
        var i = 0;
        canvas.onmousedown = function(p){
        	ctx.moveTo(p.pageX - canvas.offsetLeft, p.pageY - canvas.offsetTop);
       		canvas.onmousemove = function(e){
       			
	        	x = e.pageX;
            y = e.pageY;
            mx.push(x);
            my.push(y); 
            
ctx.drawImage(pap, -100,0,1150,canvas.height);
            //ctx.drawImage(img, x - canvas.offsetLeft, y - canvas.offsetTop - 150,150,150);
            ctx.lineTo(x - canvas.offsetLeft, y - canvas.offsetTop);
            ctx.moveTo(x - canvas.offsetLeft, y - canvas.offsetTop);
            ctx.stroke();
                  //console.log(mx);      
        	}
        }
        
        canvas.onmouseup = function(){
        	//ctx.moveTo(x - canvas.offsetLeft, y - canvas.offsetTop);
          mx.push(-1);
          my.push(-1);
      
        	canvas.onmousemove = null;
        //  ctx.clearRect(0,0,canvas.width,canvas.height);
                  //  ctx.moveTo(mx[i] - canvas.offsetLeft, my[i] - canvas.offsetTop);
          
        };
        document.onkeypress = function(){
          go1();
        }
        function go1(){
          for (var i = 0; i < mx.length; i++) {
           document.write(mx[i]+", ");
          };
          document.write("<br><br><br>");
          for (var i = 0; i < my.length; i++) {
            document.write(my[i]+", ");
          };
        }
        function go(){
     /*     
       */   
       
          if(tx[i] == -1){
            i++;
            ctx.moveTo(tx[i] - canvas.offsetLeft, ty[i] - canvas.offsetTop);
          }
          else{
            ctx.clearRect(tx[i-1] - canvas.offsetLeft, ty[i-1] - canvas.offsetTop - 150,150,150);
          ctx.drawImage(fon, 0,0);
       ctx.drawImage(pap, -100,0,1150,canvas.height);
            ctx.lineTo(tx[i] - canvas.offsetLeft, ty[i] - canvas.offsetTop);
            ctx.moveTo(tx[i] - canvas.offsetLeft, ty[i] - canvas.offsetTop);
            ctx.stroke();
             ctx.drawImage(img, tx[i] - canvas.offsetLeft, ty[i] - canvas.offsetTop - 150,150,150);
            i++;
          }
          
          //if(mx.lenght > i)
            requestAnimFrame(go);
        }
        ctx.moveTo(tx[0] - canvas.offsetLeft, ty[0] - canvas.offsetTop);
var img = new Image();      // Новый объект
 
img.src = 'BrowserPreview_tmp.png'; 
var fon = new Image();
fon.src = '356626-admin.jpg';
var pap = new Image();
 pap.onload = function() { // Событие которое будет исполнено в момент когда изображение будет загружено
    /*
    Какие-либо действия
  */
   //go();
}
pap.src = 'scroll_old_paper_38.png';
       
		canvas.addEventListener('mousemove', function(e){
                
                x = e.pageX;
                y = e.pageY;
                setTimeout(function(){
                    ctx.lineTo(x - canvas.offsetLeft, y - canvas.offsetTop);
                    ctx.moveTo(x - canvas.offsetLeft, y - canvas.offsetTop);
                    ctx.stroke();
 		},1)
 		});
	</script>
	
</body>
</html>
